<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{fragmento/base::base}">
<head>
    <meta charset="UTF-8">
    <title>Admin DTA</title>
    <!-- Bootstrap CSS -->
    <!-- Table to Datatable CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.min.css">
</head>
<body>
<div layout:fragment="contenido">
    <nav class="breadcrumbs">
        <a href="/" class="breadcrumbs__item">Dashboard</a>
        <a href="/users" class="breadcrumbs__item is-active">Usuarios</a> 
      </nav>
        <div class="container-fluid text-center">
            <div class="row justify-content-center align-items-center g-2">
                <div class="col-10      ">
                    <h1 style="padding: 0.5em;">Usuarios</h1>
                </div>
                <div class="col-2">
                    <a type="button" class="btn btn-success" th:href="@{/users/new}" target="_self">Nuevo</a>
                    <a type="button" class="btn btn-secondary" th:href="@{/users}" target="_self">Actualizar</a>
                </div>
            </div>
        </div>

    <div class="container-fluid">
        <table id="example" class="table table-striped">
            <thead>
            <tr>
                <th>
                    ID
                </th>
                <th>
                    Nombre
                </th>
                <th>
                    Apellido
                </th>
                <th>
                    CÃ©dula
                </th>
                <th>
                    Rol
                </th>
                <th>
                    Activo
                </th>
                <th>
                    Opciones
                </th>
            </tr>
            </thead>
            <tbody>
            <tr th:each = "m : ${users}">
                <td th:text = "${m.id}">
                    Default
                </td>
                <td th:text = "${m.name}">
                    Default
                </td>
                <td th:text = "${m.surname}">
                    Default
                </td>
                <td th:text = "${m.ci}">
                    Default
                </td>
                <td th:text = "${m.rol}">
                    Default
                </td>
                <td th:text = "${m.active}">
                    Default
                </td>
                <td class="d-flex gap-1">
                    <a type="button" class="btn btn-sm btn-primary" th:href="@{/users/update/{id}(id=${m.id})}" target="_self">Editar</a> 
                    <a type="button" class="btn btn-sm btn-secondary" th:href="@{/users/disable/{id}(id=${m.id})}" target="_self">Inhabilitar</a>
                    <button type="button" class="btn btn-sm btn-danger" th:data-id="${m.id}" data-bs-toggle="modal" data-bs-target="#exampleModal">Eliminar</button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">Eliminar usuario</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              Estas seguro que quieres eliminar este usuario?
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <button type="button" id="deleteButton" class="btn btn-danger">Eliminar</button>
            </div>
          </div>
        </div>
    </div>
    
    <!-- Bootstrap Js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <!-- Table to Datatable scripts -->
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.min.js"></script>
    <script th:src="@{/js/datatableScript.js}"></script>
    <script th:src="@{/js/userDelete.js}"></script> 
</div>
</body>
</html>
