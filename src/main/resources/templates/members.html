<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{fragmento/base::base}">
<head>
    <meta charset="UTF-8">
    <title>Admin DTA</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <!-- Table to Datatable CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.min.css">
</head>
<body>
<div layout:fragment="contenido">
        <div class="container-fluid text-center">
            <div class="row justify-content-center align-items-center g-2">
                <div class="col-10      ">
                    <h1 style="padding: 0.5em;">Miembros</h1>
                </div>
                <div class="col-2">
                    <a type="button" class="btn btn-success" th:href="@{/members/add-form}" target="_self">Nuevo</a>
                    <a type="button" class="btn btn-secondary" th:href="@{/members}" target="_self">Actualizar</a>
                </div>
            </div>
        </div>

    <div class="container-fluid">
        <table id="example" class="table table-striped">
            <thead>
            <tr>
                <th>
                    ID
                </th>
                <th>
                    CI
                </th>
                <th>
                    Creado por
                </th>
                <th>
                    Nombre
                </th>
                <th>
                    Apellido
                </th>
                <th>
                    Fecha de vencimiento
                </th>
                <th>
                    Es moroso
                </th>
                <th>
                    Foto
                </th>
                <th>
                    Tipo
                </th>
                <th>
                    Opciones
                </th>
            </tr>
            </thead>
            <tbody>
            <tr th:each = "m : ${miembros}">
                <td th:text = "${m.id}" th:style="${m.is_defaulter == 'Si' ? 'color : red;' : ''}">
                    Default
                </td>
                <td th:text = "${m.ci}" th:style="${m.is_defaulter == 'Si' ? 'color : red;' : ''}">
                    Default
                </td>
                <td th:text = "${m.created_by}" th:style="${m.is_defaulter == 'Si' ? 'color : red;' : ''}">
                    Default
                </td>
                <td th:text = "${m.name}" th:style="${m.is_defaulter == 'Si' ? 'color : red;' : ''}">
                    Default
                </td>
                <td th:text = "${m.surname}" th:style="${m.is_defaulter == 'Si' ? 'color : red;' : ''}">
                    Default
                </td>
                <td th:text = "${m.fecha_vencimiento}" th:style="${m.is_defaulter == 'Si' ? 'color : red;' : ''}">
                    Default
                </td>
                <th:block th:if="${m.is_defaulter == null}" >
                    <td th:text="No" th:classappend="moroso" th:style="${m.is_defaulter == 'Si' ? 'color : red;' : ''}"></td>
                </th:block>
                <th:block th:if="${m.is_defaulter != null}">
                    <td th:text="${m.is_defaulter}" th:style="${m.is_defaulter == 'Si' ? 'color : red;' : ''}">
                        Default
                    </td>
                </th:block>
                <td th:text = "${m.photo}" th:style="${m.is_defaulter == 'Si' ? 'color : red;' : ''}">
                    Default
                </td>
                <td th:text = "${m.type}" th:style="${m.is_defaulter == 'Si' ? 'color : red;' : ''}">
                    Default
                </td>
                <td class="d-flex gap-1">
                    <a type="button" class="btn btn-sm btn-primary" th:href="@{/members/update/{id}(id=${m.id})}" target="_self">Editar</a> 
                    <a type="button" class="btn btn-sm btn-danger"  th:href="@{/members/delete/{id}(id=${m.id})}" target="_self">Eliminar</a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
    <!-- Bootstrap Js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <!-- Table to Datatable scripts -->
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.min.js"></script>
    <script th:src="@{/js/datatableScript.js}"></script>
</div>
</body>
</html>
